---
const servicios = [
  {
    id: 'entrenamiento-personalizado',
    titulo: 'Entrenamiento Personalizado',
    descripcion: 'Sesiones one-on-one dise√±adas para tus objetivos espec√≠ficos',
    icono: 'üèãÔ∏è',
    imagen: 'https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?auto=format&fit=crop&q=60&w=500',
    color: 'from-gray-800 to-gray-900'
  },
  {
    id: 'seminarios-talleres',
    titulo: 'Seminarios y Talleres',
    descripcion: 'Aprende t√©cnicas avanzadas y mentalidad ganadora',
    icono: 'üéØ',
    imagen: 'https://images.unsplash.com/photo-1517836357463-d25dfeac3438?auto=format&fit=crop&q=60&w=500',
    color: 'from-gray-700 to-gray-800'
  },
  {
    id: 'planes-nutricionales',
    titulo: 'Planes Nutricionales',
    descripcion: 'Alimentaci√≥n balanceada para maximizar resultados',
    icono: 'ü•ó',
    imagen: 'https://images.unsplash.com/photo-1490645935967-10de6ba17061?auto=format&fit=crop&q=60&w=500',
    color: 'from-gray-600 to-gray-700'
  },
  {
    id: 'asesoria-online',
    titulo: 'Asesor√≠a Online',
    descripcion: 'Entrena desde donde est√©s con seguimiento virtual',
    icono: 'üíª',
    imagen: 'https://images.unsplash.com/photo-1611672585731-fa10603fb9e0?auto=format&fit=crop&q=60&w=500',
    color: 'from-gray-500 to-gray-600'
  },
  {
    id: 'venta-articulos-deportivos',
    titulo: 'Venta de Art√≠culos Deportivos',
    descripcion: 'Equipo y accesorios seleccionados para complementar tu entrenamiento',
    icono: 'üõí',
    imagen: 'https://images.unsplash.com/photo-1517832207067-4db24a2ae47c?auto=format&fit=crop&q=60&w=500',
    color: 'from-gray-500 to-gray-700'
  }
];
---

<section id="servicios" class="py-16 sm:py-24 lg:py-32 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-gray-50 to-white dark:from-gray-800 dark:to-gray-900">
  <div class="max-w-7xl mx-auto">
    <!-- Section Header -->
    <div class="text-center mb-12 sm:mb-16 lg:mb-20">
      <span class="inline-block px-3 py-2 sm:px-4 sm:py-2 bg-primary-light/10 text-primary-dark dark:text-primary-light rounded-full text-xs sm:text-sm font-bold uppercase tracking-wider mb-3 sm:mb-4">
        Mis Servicios
      </span>
      <h2 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-black text-gray-900 dark:text-white mb-4 sm:mb-6">
        Dise√±ado Para <span class="text-primary-dark dark:text-primary-light">Tu √âxito</span>
      </h2>
      <p class="text-lg sm:text-xl text-gray-600 dark:text-gray-400 max-w-3xl mx-auto px-4">
        Cada servicio est√° creado para llevarte al siguiente nivel, con enfoque personalizado y resultados garantizados
      </p>
    </div>

    <!-- Services Grid -->
    <div class="grid md:grid-cols-2 lg:grid-cols-6 gap-6 sm:gap-8 service-grid justify-items-center">
      {servicios.map((servicio, index) => {
        const positionClasses = [
          'lg:col-span-2',
          'lg:col-span-2',
          'lg:col-span-2',
          'lg:col-span-2 lg:col-start-2',
          'lg:col-span-2 lg:col-start-4'
        ];

        return (
          <a 
            href={`/servicios/${servicio.id}`}
            class={`service-card group relative overflow-hidden rounded-3xl bg-white/5 dark:bg-gray-900/40 shadow-xl transition-transform duration-200 ${positionClasses[index] ?? 'lg:col-span-2'}`}
          >
            <span class="glow"></span>

            <div class="relative z-10 flex flex-col h-full">
              <div class="p-7 sm:p-8 pb-6 sm:pb-8 flex flex-col gap-5 text-center items-center">
                <div class="flex flex-col gap-3">
                  <h3 class="text-2xl font-black text-gray-900 dark:text-white group-hover:text-primary-dark dark:group-hover:text-primary-light transition-colors">
                    {servicio.titulo}
                  </h3>
                  <p class="text-base text-gray-600 dark:text-gray-400 leading-relaxed">
                    {servicio.descripcion}
                  </p>
                </div>

                <div class="flex items-center text-primary-dark dark:text-primary-light font-semibold group-hover:translate-x-2 transition-transform text-base">
                  <span>Ver detalles</span>
                  <svg class="w-5 h-5 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                  </svg>
                </div>
              </div>

              <div class="relative mt-auto px-7 sm:px-8 pb-7 sm:pb-8">
                <div class="relative rounded-2xl overflow-hidden h-40 sm:h-48 border border-white/10 dark:border-white/5 shadow-inner">
                  <img 
                    src={servicio.imagen} 
                    alt={servicio.titulo}
                    class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
                    loading="lazy"
                    fetchpriority="low"
                    width="500"
                    height="320"
                  />
                  <div class={`absolute inset-0 bg-gradient-to-t ${servicio.color} opacity-40 group-hover:opacity-30 transition-opacity duration-500`}></div>
                </div>
              </div>
            </div>
          </a>
        );
      })}
    </div>

    <!-- Bottom CTA -->
    <div class="mt-20 text-center">
      <p class="text-lg text-gray-600 dark:text-gray-400 mb-6">
        ¬øNo est√°s seguro cu√°l es el mejor para ti?
      </p>
      <a 
        href="/contacto" 
        class="inline-flex items-center px-8 py-4 text-white bg-primary-dark hover:bg-primary font-bold rounded-full transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl"
      >
        <span class="text-white font-bold">Agenda una Consulta Gratuita</span>
        <svg class="w-5 h-5 ml-2 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
        </svg>
      </a>
    </div>
  </div>
</section>

<style>
  .service-grid {
    perspective: 1400px;
    perspective-origin: 50% 50%;
  }

  .service-card {
    --rx: 0deg;
    --ry: 0deg;
    --angle: 135deg;
    position: relative;
    transform-style: preserve-3d;
    transform: rotateX(var(--rx)) rotateY(var(--ry));
    backdrop-filter: blur(18px);
    border: 1px solid rgba(255, 255, 255, 0.12);
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.04),
      rgba(123, 168, 47, 0.08)
    );
  }

  .dark .service-card {
    border-color: rgba(255, 255, 255, 0.08);
    background: linear-gradient(
      135deg,
      rgba(15, 23, 42, 0.75),
      rgba(15, 23, 42, 0.55)
    );
  }

  .service-card::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    padding: 1px;
    background: linear-gradient(var(--angle), rgba(184, 233, 134, 0.4), rgba(87, 135, 32, 0.1));
    -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    -webkit-mask-composite: xor;
    mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    mask-composite: exclude;
    pointer-events: none;
    z-index: 2;
  }

  .dark .service-card::before {
    background: linear-gradient(var(--angle), rgba(184, 233, 134, 0.3), rgba(184, 233, 134, 0.08));
  }

  .service-card .glow {
    position: absolute;
    top: var(--gy, 50%);
    left: var(--gx, 50%);
    width: 260px;
    height: 260px;
    background: radial-gradient(circle at center, rgba(184, 233, 134, 0.18), transparent 70%);
    transform: translate(-50%, -50%);
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.35s ease;
    z-index: 0;
  }

  .dark .service-card .glow {
    background: radial-gradient(circle at center, rgba(123, 168, 47, 0.25), transparent 75%);
  }

  .service-card:hover .glow {
    opacity: 1;
  }

  .service-card a,
  .service-card img {
    transform: translateZ(0);
  }

  @media (max-width: 768px) {
    .service-grid {
      perspective: none;
    }

    .service-card {
      transform: none !important;
    }

    .service-card .glow {
      display: none;
    }
  }
</style>

<script>
  const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  const finePointer = window.matchMedia('(pointer: fine)').matches;

  if (!prefersReducedMotion && finePointer) {
    const cards = document.querySelectorAll('.service-card');

    cards.forEach((card) => {
      const glow = card.querySelector('.glow');

      card.addEventListener('mousemove', (event) => {
        const rect = card.getBoundingClientRect();
        const x = event.clientX - rect.left;
        const y = event.clientY - rect.top;

        const centerX = rect.width / 2;
        const centerY = rect.height / 2;

        const rotateX = ((y - centerY) / centerY) * -12;
        const rotateY = ((x - centerX) / centerX) * 12;
        const angle = 135 + rotateX - rotateY;

        card.style.setProperty('--rx', `${rotateX}deg`);
        card.style.setProperty('--ry', `${rotateY}deg`);
        card.style.setProperty('--angle', `${angle}deg`);
        card.style.setProperty('--gx', `${x}px`);
        card.style.setProperty('--gy', `${y}px`);
      });

      card.addEventListener('mouseleave', () => {
        card.style.setProperty('--rx', '0deg');
        card.style.setProperty('--ry', '0deg');
        card.style.setProperty('--angle', '135deg');
      });
    });
  }
</script>
