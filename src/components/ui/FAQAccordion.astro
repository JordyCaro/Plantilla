---
const faqs = [
  {
    question: "¿Cuánto tiempo dura una sesión de entrenamiento?",
    answer: "Las sesiones de entrenamiento personalizado duran entre 60-90 minutos, dependiendo de tus objetivos y nivel de condición física. Incluyen calentamiento, entrenamiento principal y estiramiento."
  },
  {
    question: "¿Necesito experiencia previa en el gym?",
    answer: "¡Para nada! Trabajo con personas de todos los niveles, desde principiantes absolutos hasta atletas avanzados. Adapto cada rutina a tu nivel actual y progresamos juntos."
  },
  {
    question: "¿Dónde se realizan las sesiones?",
    answer: "Ofrezco sesiones en mi gimnasio, a domicilio (según ubicación) y también sesiones virtuales online para que puedas entrenar desde donde estés."
  },
  {
    question: "¿Incluyes plan de alimentación?",
    answer: "Sí, todos mis planes de entrenamiento personalizado incluyen guías nutricionales básicas. También ofrezco planes nutricionales completos y detallados como servicio adicional."
  },
  {
    question: "¿Con qué frecuencia debo entrenar?",
    answer: "Depende de tus objetivos, pero recomiendo mínimo 3 sesiones por semana para ver resultados consistentes. Crearemos un horario que se adapte a tu disponibilidad."
  },
  {
    question: "¿Cuánto tiempo toma ver resultados?",
    answer: "Los primeros cambios se notan en 2-3 semanas (más energía, mejor sueño). Cambios físicos visibles generalmente en 4-8 semanas con consistencia. Cada cuerpo es diferente."
  },
  {
    question: "¿Qué pasa si tengo una lesión o condición médica?",
    answer: "Trabajo con cuidado adaptando ejercicios según tus necesidades. Es importante informarme sobre cualquier condición médica para diseñar un programa seguro y efectivo."
  },
  {
    question: "¿Ofreces planes para grupos o parejas?",
    answer: "¡Sí! Tengo opciones para entrenar en pareja o grupos pequeños (máx 4 personas). Es una excelente manera de motivarse mutuamente y hacer el proceso más divertido."
  }
];
---

<section id="faq" class="py-20 px-4 sm:px-6 lg:px-8 bg-gray-900">
  <div class="max-w-7xl mx-auto h-full min-h-full flex flex-col">
    <div class="text-center mb-16">
      <span class="inline-block px-4 py-2 bg-primary-light/10 text-primary rounded-full text-sm font-bold uppercase tracking-wider mb-4">
        Preguntas Frecuentes
      </span>
      <h2 class="text-4xl lg:text-5xl font-black text-gray-900 dark:text-white mb-4">
        ¿Tienes Dudas?
      </h2>
      <p class="text-xl text-gray-300">
        Aquí están las respuestas a las preguntas más comunes
      </p>
    </div>

    <div class="faq-wrap">
      <div class="faq-grid space-y-4 lg:space-y-0 lg:gap-4">
      {faqs.map((faq, index) => (
        <div class="faq-item bg-gray-800/60 border border-white/10 rounded-xl overflow-hidden shadow-md hover:shadow-lg transition-shadow duration-300">
          <button 
            class="faq-question w-full text-left px-6 py-5 flex justify-between items-center gap-4 hover:bg-gray-800/70 transition-colors"
            aria-expanded="false"
            data-faq-index={index}
          >
            <span class="text-lg font-bold text-white pr-4">
              {faq.question}
            </span>
            <svg class="faq-icon w-6 h-6 text-primary flex-shrink-0 transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>
          <div class="faq-answer overflow-hidden transition-all duration-300 ease-in-out" style="max-height: 0;">
            <div class="px-6 pb-5 text-gray-300 leading-relaxed">
              {faq.answer}
            </div>
          </div>
        </div>
      ))}
      </div>

    <!-- CTA Bottom -->
    <div class="mt-12 text-center p-8 bg-gradient-to-r from-primary to-primary-light rounded-2xl">
      <h3 class="text-2xl font-bold text-gray-900 mb-4">
        ¿No encuentras tu respuesta?
      </h3>
      <p class="text-gray-800/90 mb-6">
        Contáctame directamente y resolveré todas tus dudas
      </p>
      <a 
        href="/contacto" 
        class="inline-flex items-center px-8 py-4 bg-white text-primary font-bold rounded-full hover:bg-gray-100 transition-all duration-300 transform hover:scale-105 shadow-lg"
      >
        Hacer una Consulta
        <svg class="w-5 h-5 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
        </svg>
      </a>
    </div>
  </div>
</section>

<script>
  function initFAQ() {
    const faqButtons = document.querySelectorAll('.faq-question');
    
    faqButtons.forEach(button => {
      button.addEventListener('click', () => {
        const faqItem = button.closest('.faq-item');
        const answer = faqItem?.querySelector('.faq-answer') as HTMLElement;
        const icon = button.querySelector('.faq-icon');
        const isExpanded = button.getAttribute('aria-expanded') === 'true';
        
        // Cerrar todos los demás
        faqButtons.forEach(otherButton => {
          if (otherButton !== button) {
            const otherItem = otherButton.closest('.faq-item');
            const otherAnswer = otherItem?.querySelector('.faq-answer') as HTMLElement;
            const otherIcon = otherButton.querySelector('.faq-icon');
            
            otherButton.setAttribute('aria-expanded', 'false');
            if (otherAnswer) otherAnswer.style.maxHeight = '0';
            otherIcon?.classList.remove('rotate-180');
          }
        });
        
        // Toggle el actual
        if (isExpanded) {
          button.setAttribute('aria-expanded', 'false');
          if (answer) answer.style.maxHeight = '0';
          icon?.classList.remove('rotate-180');
        } else {
          button.setAttribute('aria-expanded', 'true');
          if (answer) answer.style.maxHeight = answer.scrollHeight + 'px';
          icon?.classList.add('rotate-180');
        }
      });
    });
  }
  
  // Inicializar
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initFAQ);
  } else {
    initFAQ();
  }
  
  // Reinicializar después de transiciones de Astro
  document.addEventListener('astro:after-swap', initFAQ);
</script>

<style>
  .faq-icon {
    transition: transform 0.3s ease;
  }

  .rotate-180 {
    transform: rotate(180deg);
  }

  /* Responsive grid/scroll behavior */
  #faq { height: 100%; min-height: 100%; }
  .faq-wrap { flex: 1 1 auto; }
  @media (min-width: 1024px) {
    .faq-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
  }
  @media (max-width: 767px) {
    .faq-wrap {
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
      max-height: calc(100svh - 200px);
    }
    .faq-wrap::-webkit-scrollbar { display: none; }
  }
</style>



